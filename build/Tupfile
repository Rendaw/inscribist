# Copyright 2011 Rendaw, under the FreeBSD license (See included LICENSE.txt)
#
# Make sure tup.config exists for config variables. It should be created by configure.sh

include_rules

# Organizing flags and such
COMPILEFLAGS += -D REVISION=@(VERSION) -D DATALOCATION=\"@(DATADIRECTORY)\"

# Applying settings (as possible) to flags
ifeq (@(ENV_PLATFORM),windows)
	COMPILEFLAGS += -DWINDOWS
	BINEXTENSION = .exe
endif
ifeq (@(ENV_PLATFORM),linux)
	COMPILEFLAGS += -DLINUX 
endif 

# Compilation
GENERAL_SOURCES = \
	../ren-general/color.cxx \
	../ren-general/range.cxx \
	../ren-general/region.cxx \
	../ren-general/rotation.cxx \
	../ren-general/vector.cxx
APPLICATION_SOURCES = \
	../ren-application/lightsettings.cxx \
	../ren-application/stringtable.cxx
SCRIPT_SOURCES = \
	../ren-script/script.cxx
INSCRIBIST_SOURCES = \
	../main.cxx \
	../settingsdialog.cxx \
	../settings.cxx \
	../cursorstate.cxx \
	../image.cxx \
	../gtkwrapper.cxx

SOURCES = $(GENERAL_SOURCES) $(SCRIPT_SOURCES) $(APPLICATION_SOURCES) $(INSCRIBIST_SOURCES)

: foreach $(SOURCES) |> !object |> %B.o {objects}
: {objects} |> !executable |> inscribist$(BINEXTENSION)

