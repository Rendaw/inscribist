tup.dorulesfile()
tup.dofile '../ren-general/build/files.tup'
tup.dofile '../ren-script/build/files.tup'
tup.dofile '../ren-translation/build/files.tup'
tup.dofile '../ren-gtk/build/files.tup'

Sources = 
{
	'../main.cxx',
	'../settingsdialog.cxx',
	'../settings.cxx',
	'../expanddialog.cxx',
	'../cursorstate.cxx',
	'../image.cxx',
}

Objects = {}
for Index, Source in ipairs(Sources)
do
	table.insert(Objects, Rule.Object(Source))
end

TestObjects = {'image.cxx.o', 'settings.cxx.o', Rule.Object('../test.cxx')}

for Index, Object in ipairs(RenGeneralObjects) 
do 
	table.insert(Objects, Object) 
	table.insert(TestObjects, Object) 
end
for Index, Object in ipairs(RenScriptObjects) 
do 
	table.insert(Objects, Object) 
	table.insert(TestObjects, Object) 
end
for Index, Object in ipairs(RenTranslationObjects) 
do 
	table.insert(Objects, Object) 
	table.insert(TestObjects, Object) 
end
for Index, Object in ipairs(RenGTKObjects) 
do 
	table.insert(Objects, Object) 
end
if tup.getconfig('PLATFORM') == 'windows'
then
	Rule.Executable(Objects, 'inscribist.exe')
	Rule.Executable(TestObjects, 'test.exe')
else
	Rule.Executable(Objects, 'inscribist')
	Rule.Executable(TestObjects, 'test')
end

